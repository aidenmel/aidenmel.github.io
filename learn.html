<html lang="en">
    <head>
        <title>Learn - Aiden Melton</title>
        <link rel="stylesheet" href="alternative-style.css">
        
        <link rel="icon" href="/assets/logo-gen1.png">
        <meta name="theme-color" content="#929292">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="UTF-8">
        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script src="scripts/modules/nav.js"></script>
    </head>
    <body>

        <!-- Loading Screen -->
        <div id="LoadingScreen">
            <svg viewBox="0 0 30 30">
                <path d="M9 17L15 1L21 17L5 9H25" stroke="white" stroke-width="0.5"/>
            </svg>
            <p class="loadingMsg">We're getting everything ready.</p>
        </div>

        <!-- Navigation -->
        <nav class="hide" id="top-nav">
            <h1 id="default-header-title">Aiden's Portfolio</h1>
            <a href="/index.html" id="manipulated-header">
                <svg class="brand-icon" viewBox="0 0 29 20"><path d="M9 17L15 1L21 17L5 9H25" stroke="white" stroke-width="0.5"/></svg>
                <h1>Aiden's Portfolio</h1>
            </a>
            <ul class="insert-nav" id="nav-ul">
            </ul>
        </nav>

        <!-- Mobile Navigation -->
        <div class="touch-nav-bar" id="osn-menu-btn">
            <div class="menu-icon">
                <div class="menu-line top"></div>
                <div class="menu-line center"></div>
                <div class="menu-line bottom"></div>
            </div>
        </div>

        <div class="on-screen-nav insert-nav" id="osn-container">
            <li><h6>NAVIGATION</h6></li>
            
            
            <!-- <li><p>Site created by Aiden Melton</p></li> -->
            
            <script>
                
                // Objects
                var MenuButton = document.getElementById("osn-menu-btn");
                var OSNContainer = document.getElementById("osn-container")
                var OSNChildren = OSNContainer.children

                // Values
                var OSNActive = false;
                var debounce = false;
                
                // Events
                MenuButton.addEventListener('click', (e) => {
                    ToggleOnScreenMenu();
                })

                // Functions
                function ToggleOnScreenMenu() {

                    if (debounce == false){ // Check debounce
                        debounce = true;

                        if (OSNActive == false){

                            OSNContainer.style.display = 'block';
                            setTimeout(() => {
                                OSNContainer.classList.add("active")
                            }, 10);

                            MenuButton.classList.add('m-enabled')

                            // Make items appear
                            for (let i = 0; i < OSNChildren.length; i++){
                                console.log(OSNChildren[i])
                                setTimeout(() => {
                                    OSNChildren[i].classList.add('item-appear')
                                }, (i + 1) * 150);
                            }

                            OSNActive = true;
                        } else {
                            MenuButton.classList.remove('m-enabled')
                            OSNContainer.classList.remove("active")
                            OSNActive = false;

                            // Make items disappear
                            for (let i = 0; i < OSNChildren.length; i++){
                                OSNChildren[i].classList.remove('item-appear')
                            }

                            // Change display
                            setTimeout(() => {
                                OSNContainer.style.display = 'none';
                            }, 401);
                        }

                        setTimeout(() => {
                            debounce = false;
                        }, 1000);
                    }
                }
            </script>
            <script src="/scripts/loading-module.js"></script>
        </div>

<!-- 
        
    learn.html

-->
    <section id="blur-background">
        <ul id="bg-dots"></ul>

        <script>
            // Variables
            var $background = $("#bg-dots");
            var dots = [];
            var RANDOM_START_DIRECTIONS = [-1, 1]

            // Create a random number of circles
            for (let i = 0; i < Math.floor(4 * ($(document).width() / 800)); i++){
                var newDot = {
                    $obj: $("<li>").addClass('bg-dot').appendTo($background),
                    x: Math.random() * $(document).width(),
                    y: Math.random() * $(document).height(),
                    directionX:  RANDOM_START_DIRECTIONS[Math.floor(Math.random() * RANDOM_START_DIRECTIONS.length)],
                    directionY:  RANDOM_START_DIRECTIONS[Math.floor(Math.random() * RANDOM_START_DIRECTIONS.length)],
                }
                var $dot = newDot['$obj']; 

                // Width & Height
                var RAN_WIDTH = ((Math.random() * .1) + .2) * $(document).width(); 
                var RAN_HEIGHT = ((Math.random() * .1) + .2) * $(document).height();
                $dot.width(RAN_WIDTH).height(RAN_HEIGHT);

                // Set position
                $dot.css({
                  'left': newDot.x,
                  'top': newDot.y,  
                })

                dots.push(newDot)
            }

        // Interval
            setInterval(() => {
                
                // Loop through dots
                for (var i = 0; i < dots.length; i++){
                    var dot_data = dots[i];

                    // Update position
                    dot_data.x += dot_data.directionX;
                    dot_data.y += dot_data.directionY;

                    // Detect collisions
                    if (dot_data.x < 0 || dot_data.x > $(window).width()){
                        dot_data.directionX *= -1
                    }
                    
                    if (dot_data.y < 0 || dot_data.y > window.innerHeight){
                        dot_data.directionY *= -1
                        console.log(dot_data.directionY)
                    }

                    // Update position
                    updatePosition(dot_data);
                }

            }, 50);

        // Helper Function
        function updatePosition(data){
            data['$obj'].css({
                'left': data.x,
                'top': data.y,
            })
        }

        </script>
    </section>

    <article class="is-sticky" style="height: 500vh;">
        <section id="lesson-plan">
            <!-- Title -->
            <section class='lesson'>
                <h3>learn.html</h3>
                <h1 class="big">Creating Scroll Effects</h1>
                <p>My portfolio is centered around interactions. On this page, you'll learn how to create and integrate a basic scroll effeect for your website.</p>
                <h3 style="margin-top: 4.8em;">Continue scrolling to move forwards.</h3>
            </section>

            <!-- About -->
            <section class='lesson left half'>
                <aside>
                    <h1>What <i>are</i> Scroll Effects?</h1>
                    <p>Scroll effects are animations or manipulations that occur when the client reaches ("scrolls pass") a specific point on the page. Most effects are integrated with javascript, though some can be made with purely css.</p>
                </aside>
                <aside>
                    <div class="mini-window">
                        <div class="fs">
                            <h1>Try it out!</h1>
                            <p>Watch these objects below appear as you scroll.</p>
                        </div>
                        <h1 class="fade-fx">This</h1>
                        <h1 class="fade-fx">String</h1>
                        <h1 class="fade-fx">Just</h1>
                        <h1 class="fade-fx">Appeared!</h1>
                        <p class="fs">Now its time to learn how this works!</p>
                    </div>
                </aside>
            </section>

            <!-- APPEAR/DISAPPEAR Effect -->

            <section class="lesson">
                <h1 class="big">Your Objective</h1>
                <p>Learn how to integrate .scroll() events with object classes to create custom effects.</p>
            </section>

            <section class='lesson left'>
                    <h1>How does it work?</h1>
                    <p>This works by <mark>comparing the object's absolute position to that of the cilent's</mark> active position (the position at which the client has scrolled). So, if the scroll position is greater than the element's absolute position, show the object. Else, hide the object.</p>
            </section>

            <section class="lesson half">
                <aside>
                    <h1>Getting Started</h1>
                    <p>Create a class that will be used to loop through all objects with scrolling effects.</p>
                    <hr>
                    <p>For this tutorial, we'll assign the class "fade-fx" to all of our appearing/disappearing elements.</p>
                </aside>
                <aside class='content-center'>
                    <h1 class="big"><mark>.fade-fx</mark></h1>
                </aside>
            </section>

            <!-- Coding portion -->
            <section class='lesson left half'>
                <aside>
                    <h3>The Actual Code (1/5)</h3>
                    <h1>Create a Event Handler</h1>
                    <p>We will start by creating a event handler. Fortunately, jquery has a ".scroll()" event that we will prioritize for the remainder of this tutorial.</p>
                    <hr>
                    <h1>What's 'window'?</h1>
                    <p>Window is the viewport/container of client's browser that a webpage is displayed on.</p>
                </aside>
                <aside>
                    <code class="code-block priority"><pre>
<mark>// Uses the 'window' selecter to detect for scrolling across the entire webpage.</mark>

$(window).scroll(function(){ 

})</pre></code>
                </aside>
            </section>

            

            <section class='lesson left half'>
                <aside>
                    <h3>The Actual Code (2/5)</h3>
                    <h1>Integrate .fade-fx</h1>
                    <p>Now, loop through the .fade-fx class that will later collect each element's absolute position.</p>
                </aside>
                <aside>
                    <code class="code-block"><pre>
// Uses the 'window' selecter to detect for scrolling across the entire webpage.

$(window).scroll(function(){

<div class="priority">  <mark>// .each() loops through all objects with the ".fade-fx" class</mark> 
    $(".fade-fx").each(function(){

    })</div>
})</pre></code>
                </aside>
            </section>

            <section class='lesson left'>
                    <h3 style="margin-bottom: .8em">A Concept to Understand</h3>
                    <h1><mark>$(this)</mark></h1>
                    <p>Soon, you will see the use of $(this). <mark>$(this) is each individual object returned from the function .each().</mark> In other words, $(this) will be the object the effect will take place on.</p>
            </section>

            <section class='lesson left half'>
                <aside>
                    <h3>The Actual Code (3/5)</h3>
                    <h1>Collect Positions</h1>
                    <p>Create a variable that holds the value of <mark>window.scrollTop()</mark> to get the position the client scrolled to. </mark></p>
                    <hr>
                    <p>Then, get the absolute position of $(this) by using <mark>.offset().top</mark>. This will return the object's position relative to the top of the page.</p>
                </aside>
                <aside>
                    <code class="code-block"><pre>
...

$(window).scroll(function(){
<div class="priority"><mark>// Gets the client's scroll position</mark>
var SCROLL_POSITION = $(window).scrollTop();</div>

    // .each() loops through all objects with the ".fade-fx" class
    $(".fade-fx").each(function(){
<div class="priority">
    <mark>// Returns the absolute top position</mark>
    var ABSOLUTE_POSITION = $(this).offset().top;
</div>
    })
...</pre></code>
                </aside>
            </section>

            <section class='lesson left half'>
                <aside>
                    <h3>The Actual Code (4/5)</h3>
                    <h1>Set Conditionals</h1>
                    <p>Create a conditional statement that determines whether <mark>ABSOLUTE_POSITION</mark> is greater than <mark>SCROLL_POSITION</mark>.</p>
                </aside>
                <aside>
                    <code class="code-block"><pre>
...
var SCROLL_POSITION = $(window).scrollTop();

    // .each() loops through all objects with the ".fade-fx" class
    $(".fade-fx").each(function(){

        // Returns the absolute top position
        var ABSOLUTE_POSITION = $(this).offset().top;

        <div class="priority"><mark>// if ABSOLUTE_POSITION is greater than SCROLL_POSITION</mark>
            if (ABSOLUTE_POSITION >= SCROLL_POSITION){
            
            } else {

            }</div>
...</pre></code>
                </aside>
            </section>

        </section>
    </article>

    <script>

// TUTORIAL
// By Aiden M.
//
// While this is exact to the tutorial, some parts have been 
// added to integrate effects inside the mini canvas.


// Uses the 'window' selecter to detect for scrolling across the entire webpage.
$(window).scroll(function(){ 
    // Gets the client's scroll position
    var SCROLL_POSITION = $(window).scrollTop();

    // .each() loops through all objects with the ".fade-fx" class 
    $(".fade-fx").each(function(){

        // Returns the absolute top position
        var ABSOLUTE_POSITION = $(this).offset().top;


    })
})


 // BELOW IS FOR THE MINI CANVAS - IGNORE!

    $('.fade-fx').each(function(){
        var $obj = $(this)

        // Checks for parent of mini window
        if ($obj.parent().hasClass('mini-window')){
            var $miniCanvas = $(this).parent(); // the mini window

            var ABSOLUTE_POSITION = $obj.position().top;

            // Creates a scroll event based off $miniCanvas
            $miniCanvas.scroll(function(){

                // Calculate position
                var childPos = $obj.offset().top;

                // Gets the client's scroll position
                var SCROLL_POSITION = $miniCanvas.scrollTop();

                if (childPos <= $miniCanvas.offset().top + (2 * ($miniCanvas.height()/3))){
                    $obj.addClass('seen')
                    console.log(true)
                } else if (ABSOLUTE_POSITION >= 0) {
                    $obj.removeClass('seen')
                }

            })

        }
    })

//      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
//      !!   SEPERATE FROM TUTORIAL   !!
//      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

    // Lesson Page Scrolling by Aiden Melton

        // Variables
        var $lessonPlan = $("#lesson-plan");
        var lessons = $lessonPlan.children();
        var VIEWPORT_HEIGHT = window.innerHeight;
        var VIEWPORT_WIDTH = window.innerWidth;
        var $activeChild = lessons[0];

        // Setup Functions 
        function getAbsolutePositions(){
            for (let lesson_index in lessons){
                if (lesson_index < lessons.length){
                    var lesson = lessons[lesson_index]
                    var abs_left = $(lesson).offset().left;
                    $(lesson).attr('abs-left', abs_left)
                }
            } 
        }

        getAbsolutePositions() // For initial setup

        // Functions
        function scrollPercentage($parent, SCROLL_POSITION){ // Returns a percent of what the user has scrolled
            var absouteHeight = $parent.height() - VIEWPORT_HEIGHT; // Get the total height of the parent and subtract it by the height on screen
            var objectStart = $parent.offset().top; 
            SCROLL_POSITION -= objectStart; // Removes excess pixels that come before the parent object
            return SCROLL_POSITION / absouteHeight;
        }

        function getActiveContainer(children, PERCENTAGE){ // Returns the container that the client has scrolled to
            var absolutePosition = Math.floor(children.length * PERCENTAGE)
            if (absolutePosition > children.length){absolutePosition === children.length - 1}
            return children[absolutePosition];
        }

        function updatePagePosition($toMove, $updateTo){
            // Update CSS
            $toMove.css({
                // 'transform': 'translate(' + child_index + 'px, ' + $updateTo.offset().top + 'px )',
                'transform': 'translateX(' + -($updateTo.attr('abs-left')) + 'px)',
            })
        }

        // Event Handler
        $(window).scroll(function(){
            var SCROLL_POSITION = $(window).scrollTop(); // Gets user's current position
            var PERCENTAGE_SCROLLED = scrollPercentage($lessonPlan.parent(), SCROLL_POSITION);
            var $child = $(getActiveContainer(lessons, PERCENTAGE_SCROLLED))
            
            // Manipulate object
            if ($child !== $activeChild){ 
                updatePagePosition($lessonPlan, $child) // Updates the position of the lesson plan
                $activeChild = $child // Updates $activeChild variable
            }
        })

        $(window).resize(function(){
            getAbsolutePositions();
        })

        

    </script>

    </body>
</html>